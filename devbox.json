{
  "packages": [
    "nodejs@20",
    "uv",
    "pnpm",
    "postgresql@16",
    "gnumake"
  ],
  "env": {
    "PYTHONUNBUFFERED": "1",
    "LD_LIBRARY_PATH": "$LD_LIBRARY_PATH:./.devbox/nix/profile/default/lib"
  },
  "shell": {
    "init_hook": [
      "echo 'Welcome to QR-EMS Devbox Environment!'",
      "echo 'Node version: $(node --version)'"
    ],
    "scripts": {
      "setup": [
        "uv sync",
        "cd frontend && pnpm install"
      ],
      "dev-back": "cd backend && uv run python manage.py runserver",
      "dev-front": "cd frontend && pnpm dev",
      "test": "make test-back && make test-front"
    }
  }
}
